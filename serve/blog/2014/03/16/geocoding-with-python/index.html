
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Geocoding With Python - Max Alcalá Sáinz</title>
  <meta name="author" content="Max Arturo Alcalá Sáinz">

  
  <meta name="description" content="My girlfriend had an interesting problem for me over the weekend. She has a pretty cool job (she will tell you its rather dull) doing primary-source &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://maxarturoas.com/blog/2014/03/16/geocoding-with-python">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  <link href="/atom.xml" rel="alternate" title="Max Alcalá Sáinz" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  4<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=Istok+Web" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=Lora" rel="stylesheet" type="text/css">
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-50775648-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Max Alcalá Sáinz</a></h1>
  
    <h2>Blog, photography portfolio, catalyst, but cacophony for the most part.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:maxarturoas.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Geocoding With Python</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-03-16T21:02:45-05:00" pubdate data-updated="true">Mar 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>My girlfriend had an interesting problem for me over the weekend. She has a pretty cool job (she will tell you its rather dull) doing primary-source research for an art/production firm, and she needed to start plotting some arbitrary locations into a map. She wasn&rsquo;t sure yet what program she&rsquo;d use to do this, but we arrived at the conclusion that having a list of lat/long&rsquo;s would help her no matter what program she ended up using.</p>

<p>For those like me that had no idea, <strong>Geocoding</strong> is the process of taking natural-language location descriptions and matching them to their corresponding latitude and longitude. <!-- more --> Google has an outstanding (and free!) API to get up to 2500 geocodings per day using its well-curated source of locations. The API usage is <a href="https://developers.google.com/maps/documentation/geocoding/">clearly documented</a>, as is tradition for Google, so it was a matter of quickly coding something up quick so that the GF could go on her merry way.</p>

<p>The script ought to be straightforward:</p>

<ol>
<li>read some input file</li>
<li>iterate over the list, calling the Google Maps API for each location and write the output to a file</li>
<li>Profit</li>
</ol>


<p>Though I am a VBS man at heart, I wanted to do something different. In the spirit of owning my own progress as a programmer I&rsquo;ve decided to not use VBS or any other language I&rsquo;m comfortable with going forward, which is very refreshing. Python&rsquo;s legendary breadth of modules to do <a href="https://www.python.org/doc/humor/#shooting-yourself-in-the-foot">pretty much anything</a> is well known, and having done some Django before pushed me to go with it.</p>

<p>What an amazing experience! Everything just <em>works</em>. In the process of writing up the script, I learned about setting up Virtualenv, generating the packaging install scripts, the top-notch <a href="http://docs.python-requests.org/en/latest/">requests module</a> and working wtih JSON to extract the data I needed. I really didn&rsquo;t think it would be this easy to interact with the different modules and goodies that Python includes by default. One part in specific that blew me away was the included <code>cmd</code> module to generate your very-own CLI for your program, just by <em>documenting your methods</em>. For example,</p>

<figure class='code'><figcaption><span>Self-building CLI</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'>   <span class="k">def</span> <span class="nf">do_quit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">args</span><span class="p">):</span>
</span><span class='line'>      <span class="sd">&quot;&quot;&quot;Quits the program&quot;&quot;&quot;</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;Quitting.&quot;</span>
</span><span class='line'>      <span class="k">raise</span> <span class="ne">SystemExit</span>
</span></code></pre></td></tr></table></div></figure>


<p>defines an argument within your CLI right after the method name <code>do_</code>. The help verbiage is the doc for the method, and the implemented superclass takes care of the looping.</p>

<p><em>Brilliant</em>.</p>

<p>No wonder everyone is going crazy about Python! I&rsquo;m very happy I ran into this just by having to make this rather simple script and it goes to show just how much more there is to learn. The script worked out and the GF was able to use it (granted I probably didn&rsquo;t need to add a CLI, but hey!!) and got brownie points for it. Not brownies, though. We&rsquo;re working on that.</p>

<p>If you&rsquo;re interested in the script it&rsquo;s <a href="https://github.com/maxArturo/gMapsGeoCoder/blob/master/geocoder.py">here</a>, as well as on my github account on the side of the page. There are some silly assumptions about quotes as I was taking in Excel-formatted CSV files and such, but you could probably modify it and make it inifinitely better if you wanted to. Yes, I know there are wrappers for Google&rsquo;s API but – that would take out the fun!</p>

<p><em>-Max</em></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Max Arturo Alcalá Sáinz</span></span>

      








  


<time datetime="2014-03-16T21:02:45-05:00" pubdate data-updated="true">Mar 16<span>th</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/geocoding/'>Geocoding</a>, <a class='category' href='/blog/categories/google-maps-api/'>Google Maps API</a>, <a class='category' href='/blog/categories/python/'>Python</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://maxarturoas.com/blog/2014/03/16/geocoding-with-python/" data-via="@MaxArturoAS" data-counturl="http://maxarturoas.com/blog/2014/03/16/geocoding-with-python/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/03/04/jumpstarting-into-phile/" title="Previous Post: Jumpstarting into Phile">&laquo; Jumpstarting into Phile</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/06/23/programming-everyday/" title="Next Post: Programming everyday as a lifestyle">Programming everyday as a lifestyle &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/07/11/top-1000-stack-overflow-tags-visualized/">Top 1000 Stack Overflow Tags, Visualized</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/07/06/and-now-for-some-data-dot-dot-dot/">And Now for Some Data...</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/06/23/programming-everyday/">Programming Everyday as a Lifestyle</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/16/geocoding-with-python/">Geocoding With Python</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/03/04/jumpstarting-into-phile/">Jumpstarting Into Phile</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/maxArturo">@maxArturo</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'maxArturo',
            count: 4,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>




<section>
  <h1>About Me</h1>
  <p>Hello! I'm a serial hobbyist. It can go from photography, to NES programming, to reverse-engineering biscotti recipes. I also teach myself myriad programming topics and data science on the side. You can find my resume in 
  <a href="/assets/personal/resume.pdf">PDF</a> 
  format, as well as <a href="/assets/personal/resume.tex">TEX</a> .</p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Photographs Copyright &copy; 2014 - Max Arturo Alcalá Sáinz.
  All other content Copyleft.
  <span class="credit">Generated in <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
